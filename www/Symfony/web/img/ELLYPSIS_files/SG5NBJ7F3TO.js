/*!CK:3657014014!*//*1457630829,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["B3+zY"]); }

__d('ChatTabComposer.react',['cx','fbt','BootloadedComponent.react','ChatConfig','ChatReactInput','CSS','JSResource','MercuryConfig','P2PSendMoneyContainerBootloader.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('ChatReactInput').module,k=c('React').PropTypes,l=77,m=c('React').createClass({displayName:'ChatTabComposer',_fileUploader:null,_photoUploader:null,mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{initializeThingsWithInputFn:k.func,inputKeyDown:k.func,onBlur:k.func,onEmojiSelect:k.func,onEscape:k.func,onFocus:k.func,onTab:k.func,openFlyoutFn:k.func,p2pProps:k.object,participantIDs:k.arrayOf(k.string),photoUploaderProps:k.object,placeHolder:k.string,resizeFn:k.func,uploadPhotoFn:k.func,showP2P:k.bool,stickerButtonProps:k.object},getInitialState:function(){return {inputHeight:0};},render:function(){return (c('React').createElement('div',{className:"_1d4_",onClick:this._handleClick},this._renderInput(),c('React').createElement('div',{className:"_552n"},this._renderIcons())));},resetInput:function(){this.refs.input.resetState();},uploadURL:function(n){if(!this._fileUploader)return;this._fileUploader.uploadURL(n);},isUploading:function(){return !!(this._fileUploader&&this._fileUploader.isUploading()||this._photoUploader&&this._photoUploader.isUploading());},getInput:function(){return this.refs.input;},_renderInput:function(){var n={};if(this.state.inputHeight)n.minHeight=this.state.inputHeight;return (c('React').createElement('div',{className:"_552h",style:n},c('React').createElement(j,{initializeThingsWithInputFn:this.props.initializeThingsWithInputFn,inputKeyDown:this.props.inputKeyDown,onBlur:this.props.onBlur,onEscape:this.props.onEscape,onFocus:this.props.onFocus,onTab:this.props.onTab,openFlyoutFn:this.props.openFlyoutFn,ref:'input',resizeFn:function(o){o=Math.min(o,l);this.setState({inputHeight:o});this.props.resizeFn&&this.props.resizeFn(o);}.bind(this),uploadPhotoFn:function(o){this._photoUploader&&this._photoUploader.uploadFiles([o]);}.bind(this),placeholder:this.props.placeholder})));},_renderIcons:function(){return [this._renderPhotoUploader(),this._renderStickerButton(),this._renderContentSearchButton(),this._renderEmojiButton(),this._renderP2PButton(),this._renderFileUploader(),this._renderLikeButton()];},_renderPhotoUploader:function(){var n=this.props.photoUploaderProps||{};return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('ChatPhotoUploader.react'),bootloadPlaceholder:c('React').createElement('span',{className:n.className},c('React').createElement('a',{className:n.linkClassName})),key:'photos',onMount:function(o){return this._photoUploader=o;}.bind(this)},n)));},_renderFileUploader:function(){var n=this.props.fileUploaderProps||{};return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('ChatPhotoUploader.react'),bootloadPlaceholder:c('React').createElement('span',{className:n.className},c('React').createElement('a',{className:n.linkClassName})),key:'files',onMount:function(o){return this._fileUploader=o;}.bind(this)},n)));},_renderStickerButton:function(){var n=this.props.stickerButtonProps||{};n.onStickerSelect=this.props.onStickerSelect;return (c('React').createElement('div',{className:"_6gd",key:'stickers'},c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('ChatStickerButton.react'),bootloadPlaceholder:c('React').createElement('span',{className:n.className})},n))));},_renderContentSearchButton:function(){if(!c('ChatConfig').get('chat_content_search'))return null;var n={className:"_6gb _6gs",getQuery:function(){return this.refs.input.getValue();}.bind(this),onSelect:function(o,p){if(o.platformFBID.toString()!==c('MercuryConfig').MessengerAppID){this.uploadURL({attribution_app_id:o.platformFBID,errorDialogParams:{body:i._("Un probl\u00e8me est survenu lors de l\u2019envoi de ce GIF. Veuillez en choisir un autre et r\u00e9essayer."),title:i._("Impossible d\u2019envoyer le GIF")},external_image_url:o.source.url,preview_url:o.media.preview?o.media.preview.url:o.media.thumbnail.url,source:o.source});}else this.props.onStickerSelect&&this.props.onStickerSelect(o.resultID.toString);}.bind(this)};return (c('React').createElement('div',{className:"_6gd",key:'contentsearch'},c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('ChatContentSearchButton.react'),bootloadPlaceholder:c('React').createElement('span',{className:n.className})},n))));},_renderEmojiButton:function(){if(!c('ChatConfig').get('www_messenger_emoji_picker'))return null;var n={className:"_6gb _3oxr",onSelect:function(o){this.props.onEmojiSelect&&this.props.onEmojiSelect(o);}.bind(this)};return (c('React').createElement('div',{className:"_6gd",key:'emojipicker'},c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('ChatEmojiButton.react'),bootloadPlaceholder:c('React').createElement('span',{className:n.className})},n))));},_renderLikeButton:function(){if(!c('ChatConfig').get('hotlike'))return null;var n="_6h1 _6gb";return (c('React').createElement('div',{className:"_6gd _5ep3",key:'like'},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('a',{className:n}),bootloadLoader:c('JSResource')('MessengerHotLikeButton.react'),className:n,customLike:this.props.thread&&this.props.thread.custom_like_icon,sendSticker:this.props.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID})));},_renderP2PButton:function(){if(!this.props.p2pProps)return null;var n=this.props.p2pProps;n.threadID=this.props.threadID;if(this.props.participantIDs&&this.props.participantIDs.length)n.participantIDs=this.props.participantIDs;return (c('React').createElement('div',{className:"_6gd",key:'p2p'},c('React').createElement(c('P2PSendMoneyContainerBootloader.react'),n)));},_handleClick:function(n){if(c('CSS').hasClass(n.target,"_1d4_")||c('CSS').hasClass(n.target,"_552h")||c('CSS').hasClass(n.target,"_552n"))this.refs.input.focus();}});f.exports=m;},null);