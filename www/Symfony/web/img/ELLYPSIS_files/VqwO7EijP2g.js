/*!CK:2460325579!*//*1456774230,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["O\/Q4n"]); }

__d("XComposerActorChangeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/composer\/actor\/change\/",{composer_id:{type:"String",required:true},entry_point:{type:"Enum",required:true,enumType:1},from_actor_id:{type:"Int",required:true},target_id:{type:"Int",required:true}});},null);
__d('ComposerXActorSelector.react',['fbt','ActorSelector.react','ActorSelectorNuxTypes','ActorURI','Arbiter','AsyncRequest','React','emptyFunction','XActorSelectorNuxSeenWriteController','XComposerActorChangeController'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ComposerXActorSelector',propTypes:{actorIDs:i.array.isRequired,composerID:i.string.isRequired,entryPoint:i.string.isRequired,loading:i.bool,nuxEnabled:i.bool,nuxHoverContext:i.object,nuxShowWithoutHover:i.bool,onChange:i.func,selectedActorID:i.string.isRequired,settingsURI:i.string,targetID:i.string.isRequired},getInitialState:function(){return {loading:false};},componentWillMount:function(){this._arbiterToken=c('Arbiter').subscribe('ComposerXPages/composePostWithActor',function(k,l){if(l.actorID){if(this.props.onChange){this.props.onChange(l.actorID);return;}this._updateCurrentActor(l.actorID,function(){if(l.callback)l.callback();});}}.bind(this));},componentWillUnmount:function(){c('Arbiter').unsubscribe(this._arbiterToken);},render:function(){return (c('React').createElement(c('ActorSelector.react'),{actorIDs:this.props.actorIDs,className:this.props.className,loading:this.props.loading||this.state.loading,nuxBody:this._getNUXBody(),nuxEnabled:this.props.nuxEnabled,nuxHoverContext:this.props.nuxHoverContext,nuxShowWithoutHover:this.props.nuxShowWithoutHover,onChange:this._onChange,onCompleteNux:this._onCompleteNux,ref:'selector',selectedActorID:this.props.selectedActorID,settingsURI:this.props.settingsURI,tooltipConstructor:this._getTooltipForActorName}));},_getNUXBody:function(){return h._("Choisissez de publier en votre nom propre ou en tant que l\u2019une des Pages que vous g\u00e9rez.");},_getTooltipForActorName:function(k){return h._("Vous publiez en tant que {actorName}",[h.param('actorName',k)]);},_onChange:function(k){if(this.props.onChange){this.props.onChange(k.value);}else this._updateCurrentActor(k.value);},_updateCurrentActor:function(k,l){l=l||c('emptyFunction');if(this.props.selectedActorID===k){l();return;}this.setState({loading:true});var m=c('ActorURI').create(c('XComposerActorChangeController').getURIBuilder().setString('composer_id',this.props.composerID).setEnum('entry_point',this.props.entryPoint).setInt('from_actor_id',this.props.selectedActorID).setInt('target_id',this.props.targetID).getURI(),k),n=function(){this.setState({loading:false});}.bind(this);new (c('AsyncRequest'))().setURI(m).setErrorHandler(n).setServerDialogCancelHandler(n).setFinallyHandler(l).send();},_onCompleteNux:function(){var k=c('XActorSelectorNuxSeenWriteController').getURIBuilder().setEnum('nux_type',c('ActorSelectorNuxTypes').COMPOSER).getURI();new (c('AsyncRequest'))().setURI(k).send();}});f.exports=j;},null);