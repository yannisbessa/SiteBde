/*!CK:1848083227!*//*1457351593,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["lyDLJ"]); }

__d("PagesManagerActivitySection",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={NOTIFICATIONS:"notifications",MESSAGES:"messages",PAGES_FEED:"pages_feed",SCHEDULED_POSTS:"scheduled_posts",DRAFT_POSTS:"draft_posts",STORIES_TO_SHARE:"stories_to_share",FEATURED_MUSIC:"featured_music",INFO_REQUESTS:"info_requests"};},null);
__d("PagesManagerNotificationsTestIDs",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LOADING_SPINNER:"LOADING_SPINNER_TEST_ID",NOTIF_LIST:"NOTIF_LIST_TEST_ID",PREVIEW_DIALOG:"PREVIEW_DIALOG_TEST_ID"};},null);
__d('InfiniteScrollArea.react',['React','ScrollableArea.react'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'InfiniteScrollArea',propTypes:{distanceToEnd:h.number,onEndReached:h.func},getDefaultProps:function(){return {distanceToEnd:50};},componentDidUpdate:function(){this._checkIfEndReached();},_checkIfEndReached:function(){if(this.props.onEndReached&&this.refs.area.getArea().distanceToBottom()<this.props.distanceToEnd)this.props.onEndReached();},render:function(){return (c('React').createElement(c('ScrollableArea.react'),babelHelpers['extends']({onScroll:this._checkIfEndReached},this.props,{ref:'area'}),this.props.children));}});f.exports=i;},null);
__d('PagesMessengerDispatcher',['PagesMessengerActions','Dispatcher_DEPRECATED'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('Dispatcher_DEPRECATED'));i=h&&h.prototype;j.prototype.handleUpdateFromViewAction=function(k){'use strict';this.dispatch({source:c('PagesMessengerActions').VIEW_ACTION,action:k});};function j(){'use strict';h.apply(this,arguments);}f.exports=new j();},null);
__d('ImmutableMap',['invariant','ImmutableValue','emptyFunction','keyOf'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('keyOf')({_DONT_EVER_TYPE_THIS_SECRET_KEY:null}),j='__size_DoNotEverTouchThis',k='__keyByIndexDoNotEverTouchThis',l='__indexByKeyDoNotEverTouchThis';function m(t){var u=isNaN(+t)||t.substring&&t.substring(0,1)==='.',v=t===k||t===l||t===j;return !v&&typeof t==='string'&&t!==''&&u;}function n(t,u,v){!(typeof t==='number'&&typeof u==='number'&&u>=0&&t>=0&&t+u<=v)?h(0):undefined;}function o(t){return t instanceof c('ImmutableValue')&&t.hasOwnProperty(j);}function p(t){!o(t)?h(0):undefined;}function q(t){return t===j||t===k||t===l;}function r(t,u,v,w){var x={enumerable:false,configurable:true,writable:true,value:u},y={enumerable:false,configurable:true,writable:true,value:v},z={enumerable:false,configurable:true,writable:true,value:w};Object.defineProperty(t,j,x);Object.defineProperty(t,k,y);Object.defineProperty(t,l,z);}var s={create:function(){var t=new (c('ImmutableValue'))(c('ImmutableValue')[i]),u=s.mergeAndValidateAllPropertiesInto(t,arguments);r(t,u,[],{});t[k].areComputed=false;return t;},mergeAndValidateAllPropertiesInto:function(t,u){var v=u.length,w=0;for(var x=0;x<v;x++){var y=u[x];for(var z in y){if(!y.hasOwnProperty(z)||o(y)&&q(z))continue;if(!t.hasOwnProperty(z)){!m(z)?h(0):undefined;w++;}var aa=y[z];!(aa!==undefined)?h(0):undefined;t[z]=aa;}}return w;},customDeepFreezeRootNode:function(t){p(t);Object.freeze(t);for(var u in t){if(!t.hasOwnProperty(u)||q(u))continue;c('ImmutableValue').recurseDeepFreeze(t[u]);}Object.seal(t);},set:function(t,u){p(t);!(u instanceof c('ImmutableValue')||typeof u==='object'&&u!==undefined&&!Array.isArray(u))?h(0):undefined;return s.create(t,u);},fromArray:function(t,u){var v=Array.isArray(t),w=typeof u==='function';!v?h(0):undefined;!w?h(0):undefined;var x=new (c('ImmutableValue'))(c('ImmutableValue')[i]),y=[],z={};r(x,t.length,y,z);for(var aa=0;aa<t.length;aa++){var ba=t[aa],ca=u(ba,aa);!!x.hasOwnProperty(ca)?h(0):undefined;!m(ca)?h(0):undefined;x[ca]=ba;y[aa]=''+ca;z[ca]=aa;}y.areComputed=true;return x;},size:function(t){p(t);s._computePositionsIfNeeded(t);return t[j];},has:function(t,u){!m(u)?h(0):undefined;p(t);return t.hasOwnProperty(u);},get:function(t,u){!m(u)?h(0):undefined;return t.hasOwnProperty(u)?t[u]:undefined;},map:function(t,u,v){p(t);s._computePositionsIfNeeded(t);return s.mapRange(t,u,0,s.size(t),v);},mapRange:function(t,u,v,w,x){p(t);s._computePositionsIfNeeded(t);var y={},z=0;n(v,w,s.size(t));var aa=v+w-1;for(var ba in t)if(t.hasOwnProperty(ba)){if(z>=v){if(z>aa)break;y[ba]=u.call(x,t[ba],ba,z);}z++;}return s.create(y);},filter:function(t,u,v){return s.filterRange(t,u,0,s.size(t),v);},filterRange:function(t,u,v,w,x){var y={};s.forEachRange(t,function(z,aa,ba){if(u.call(x,z,aa,ba))y[aa]=z;},v,w);return s.create(y);},forEach:function(t,u,v){s.forEachRange(t,u,0,s.size(t),v);},forEachRange:function(t,u,v,w,x){p(t);n(v,w,s.size(t));var y=0,z=v+w-1;for(var aa in t)if(t.hasOwnProperty(aa)){if(y>=v){if(y>z)break;u.call(x,t[aa],aa,y);}y++;}},mapKeyRange:function(t,u,v,w,x){var y=s.indexOfKey(t,v),z=s.indexOfKey(t,w);!(y!=null&&z!=null)?h(0):undefined;!(z>=y)?h(0):undefined;var aa=z-y+1;return s.mapRange(t,u,y,aa,x);},forEachKeyRange:function(t,u,v,w,x){var y=s.indexOfKey(t,v),z=s.indexOfKey(t,w);!(y!=null&&z!=null)?h(0):undefined;!(z>=y)?h(0):undefined;var aa=z-y+1;s.forEachRange(t,u,y,aa,x);},keyAtIndex:function(t,u){s._computePositionsIfNeeded(t);var v=t[k][u];return v?v:undefined;},valueAtIndex:function(t,u){var v=s.keyAtIndex(t,u);return v!==undefined?t[v]:undefined;},keyAfter:function(t,u){return s.nthKeyAfter(t,u,1);},keyBefore:function(t,u){return s.nthKeyBefore(t,u,1);},nthKeyAfter:function(t,u,v){var w=s.indexOfKey(t,u);!(w!==undefined)?h(0):undefined;return s.keyAtIndex(t,w+v);},nthKeyBefore:function(t,u,v){return s.nthKeyAfter(t,u,-v);},indexOfKey:function(t,u){!m(u)?h(0):undefined;s._computePositionsIfNeeded(t);var v=t[l][u];return v===undefined?undefined:v;},slice:function(t,u,v){return s.mapRange(t,c('emptyFunction').thatReturnsArgument,u,v);},sliceByKey:function(t,u,v){var w=s.indexOfKey(t,u),x=s.indexOfKey(t,v);!(w!=null&&x!=null)?h(0):undefined;!(x>=w)?h(0):undefined;var y=x-w+1;return s.slice(t,w,y);},toArray:function(t){var u=0,v=s.size(t),w=[];for(var x in t)if(t.hasOwnProperty(x)){if(u>v)break;w.push(t[x]);u++;}return w;},_computePositionsIfNeeded:function(t){if(t[k].areComputed===false)s._computePositionsFromDictionary(t);},_computePositionsFromDictionary:function(t){var u=t[k],v=t[l],w=0;for(var x in t)if(t.hasOwnProperty(x)){u[w]=x;v[x]=w;w++;}t[k].areComputed=true;}};f.exports=s;},null);
__d('CurrentPage',['invariant','Run'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=null,j=null,k={init:function(l){var m=l.pageID,n=l.pageName;this.setID(m);this.setName(n);c('Run').onLeave(this._clear);},getID:function(){!(i!==null)?h(0):undefined;return i;},setID:function(l){if(!i)i=l;},getName:function(){!(j!==null)?h(0):undefined;return j;},setName:function(l){if(!j)j=l;},_clear:function(){i=null;j=null;}};f.exports=k;},null);
__d('PageLikesBrowserConstants',['fbt','PageLikesBrowserJSConstants'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={LABEL_SELECTOR_OPTIONS:[c('PageLikesBrowserJSConstants').LABEL_UNLABELED,c('PageLikesBrowserJSConstants').LABEL_BANNED,c('PageLikesBrowserJSConstants').LABEL_VALUABLE,c('PageLikesBrowserJSConstants').LABEL_IRRELEVANT],getViewSelectorOptionText:function(j){switch(j){case c('PageLikesBrowserJSConstants').VIEW_FANS:return h._("Personnes qui aiment \u00e7a");case c('PageLikesBrowserJSConstants').VIEW_BANNED:return h._("Fans bannis");case c('PageLikesBrowserJSConstants').VIEW_VALUABLE:return h._("Fans VIP");case c('PageLikesBrowserJSConstants').VIEW_IRRELEVANT:return h._("Fans non pertinents");}},getLabelSelectorOptionText:function(j){switch(j){case c('PageLikesBrowserJSConstants').LABEL_IRRELEVANT:return h._("Non pertinents");case c('PageLikesBrowserJSConstants').LABEL_VALUABLE:return h._("VIP");case c('PageLikesBrowserJSConstants').LABEL_BANNED:return h._("Bannis");case c('PageLikesBrowserJSConstants').LABEL_UNLABELED:return h._("Sans \u00e9tiquette");}},getLabelSelectorAction:function(j){switch(j){case c('PageLikesBrowserJSConstants').LABEL_IRRELEVANT:return c('PageLikesBrowserJSConstants').ACTION_IRRELEVANT;case c('PageLikesBrowserJSConstants').LABEL_VALUABLE:return c('PageLikesBrowserJSConstants').ACTION_VALUABLE;case c('PageLikesBrowserJSConstants').LABEL_BANNED:return c('PageLikesBrowserJSConstants').ACTION_BANNED;case c('PageLikesBrowserJSConstants').LABEL_UNLABELED:return c('PageLikesBrowserJSConstants').ACTION_UNLABELED;}}};f.exports=i;},null);
__d("XPageLikesLabelFansController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/likes\/label_fans\/",{action:{type:"String"},ban:{type:"Bool",defaultValue:false},elem_id:{type:"String"},page_id:{type:"Int"},ref:{type:"String"},user_id:{type:"Int"}});},null);
__d('PageLikesBrowserLabelSelector.react',['AsyncRequest','PageLikesBrowserConstants','PageLikesBrowserJSConstants','React','XPageLikesLabelFansController','XUISelector.react'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('XUISelector.react').Option,j=c('React').createClass({displayName:'PageLikesBrowserLabelSelector',propTypes:{label:h.string,options:h.array,pageID:h.string.isRequired,userID:h.number.isRequired},getInitialState:function(){return {label:this.props.label};},getDefaultProps:function(){return {label:c('PageLikesBrowserJSConstants').LABEL_UNLABELED,options:c('PageLikesBrowserConstants').LABEL_SELECTOR_OPTIONS};},render:function(){var k=this.props.options.map(function(l){return (c('React').createElement(i,{key:l,selected:l===this.props.label,title:l,value:l},c('PageLikesBrowserConstants').getLabelSelectorOptionText(l)));},this);return (c('React').createElement(c('XUISelector.react'),babelHelpers['extends']({},this.props,{maxwidth:null,name:'page_likes_label_selector',onChange:this._onChange,value:this.state.label}),k));},_onChange:function(k){this.setState({label:k.value});var l=c('PageLikesBrowserConstants').getLabelSelectorAction(k.value),m=c('XPageLikesLabelFansController').getURIBuilder().setInt('page_id',this.props.pageID).setString('action',l).setInt('user_id',this.props.userID).getURI();new (c('AsyncRequest'))().setURI(m).send();}});f.exports=j;},null);
__d('PageLikesBrowserFan.react',['cx','DOM','DOMContainer.react','Image.react','ImageBlock.react','LeftRight.react','Link.react','PageLikesBrowserLabelSelector.react','React','isNode'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'PageLikesBrowserFan',propTypes:{fanData:i.object.isRequired,pageID:i.string.isRequired},render:function(){var k=this.props.fanData,l=c('isNode')(k.bio)?k.bio:c('DOM').create('div',{},k.bio.markup),m=c('isNode')(k.social_context)?k.social_context:c('DOM').create('div',{},k.social_context.markup);return (c('React').createElement('li',{className:"_sr8 _2pi4"},c('React').createElement(c('ImageBlock.react'),{spacing:'large'},c('React').createElement('div',{className:"_sr9 _3-9b"},c('React').createElement('div',{className:"_sra"}),c('React').createElement(c('Image.react'),{src:k.photo})),c('React').createElement('div',{className:"_srb"},c('React').createElement(c('Link.react'),{className:"_src",href:k.uri},k.name),c('React').createElement(c('DOMContainer.react'),null,l),c('React').createElement(c('DOMContainer.react'),null,m)))));}});f.exports=j;},null);
__d('PageLikesBrowserFansList.react',['cx','fbt','InfiniteScrollArea.react','PageLikesBrowserFan.react','React','XUISpinner.react','XUIGrayText.react','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'PageLikesBrowserFansList',propTypes:{fansData:j.array,hasMore:j.bool,loadMore:j.func,pageID:j.string.isRequired},getDefaultProps:function(){return {fansData:[],hasMore:false,loadMore:c('emptyFunction')};},componentDidMount:function(){this.props.loadMore();},render:function(){var l=this.props.hasMore?c('React').createElement(c('XUISpinner.react'),{background:'light',size:'large'}):c('React').createElement(c('XUIGrayText.react'),{size:'medium'},i._("End of Page Fans")),m=c('React').createElement('li',{className:"_3mdp _2ph-"},l),n=this.props.fansData.map(function(o){return (c('React').createElement(c('PageLikesBrowserFan.react'),{fanData:o,key:o.id,pageID:this.props.pageID}));}.bind(this));return (c('React').createElement(c('InfiniteScrollArea.react'),babelHelpers['extends']({},this.props,{distanceToEnd:50,onEndReached:this.props.loadMore}),c('React').createElement('ul',null,n,m)));}});f.exports=k;},null);
__d('PageLikesBrowserViewSelector.react',['cx','PageLikesBrowserConstants','React','XUISelector.react','emptyFunction'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('XUISelector.react').Option,k=c('React').createClass({displayName:'PageLikesBrowserViewSelector',propTypes:{defaultOption:i.string.isRequired,onChange:i.func,selectorOptions:i.array.isRequired},getDefaultProps:function(){return {onChange:c('emptyFunction')};},render:function(){var l=this.props.selectorOptions.map(function(m){return (c('React').createElement(j,{key:m,selected:m===this.props.defaultOption,title:m,value:m},c('PageLikesBrowserConstants').getViewSelectorOptionText(m)));},this);return (c('React').createElement('div',this.props,c('React').createElement(c('XUISelector.react'),{className:"_3-8n _3-9a",defaultValue:this.props.defaultOption,name:'page_likes_view_selector',onChange:this.props.onChange},l)));}});f.exports=k;},null);
__d("XPageLikesBrowserDataController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/build_audience\/page_likes_browser\/data\/",{limit:{type:"Int",defaultValue:10},offset:{type:"Int",defaultValue:0},page_id:{type:"Int",required:true},type:{type:"String",required:true}});},null);
__d('PageLikesBrowser.react',['cx','AsyncRequest','PageLikesBrowserFansList.react','PageLikesBrowserJSConstants','PageLikesBrowserViewSelector.react','React','XPageLikesBrowserDataController'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'PageLikesBrowser',propTypes:{defaultOption:i.string.isRequired,listShadow:i.bool,pageID:i.string.isRequired,selectorOptions:i.array},fetchFansData:function(){if(this.state.isLoadingMore)return;this.setState({isLoadingMore:true});var k=c('XPageLikesBrowserDataController').getURIBuilder().setInt('page_id',this.props.pageID).setString('type',this.state.currenType).setInt('offset',this.state.offset).setInt('limit',c('PageLikesBrowserJSConstants').FANS_FETCH_NUMBER).getURI();this._loadMoreRequest=new (c('AsyncRequest'))().setURI(k).setHandler(function(l){this.setState({fansData:this.state.fansData.concat(l.getPayload().fans_data),hasMore:l.getPayload().fans_data.length>0,offset:this.state.offset+c('PageLikesBrowserJSConstants').FANS_FETCH_NUMBER});}.bind(this)).setFinallyHandler(function(){return this.setState({isLoadingMore:false});}.bind(this));this._loadMoreRequest.send();},getInitialState:function(){return {currenType:this.props.defaultOption,fansData:[],hasMore:true,isLoadingMore:false,offset:0};},componentWillUnmount:function(){this._loadMoreRequest.abandon();},render:function(){return (c('React').createElement('div',null,this._getViewSelector(),c('React').createElement(c('PageLikesBrowserFansList.react'),{className:"_4f1d",fansData:this.state.fansData,loadMore:this.fetchFansData,hasMore:this.state.hasMore,pageID:this.props.pageID,shadow:this.props.listShadow})));},_getViewSelector:function(){if(!this.props.selectorOptions)return null;return (c('React').createElement(c('PageLikesBrowserViewSelector.react'),{className:"_4f1c",defaultOption:this.props.defaultOption,onChange:this._onSectionChange,selectorOptions:this.props.selectorOptions}));},_onSectionChange:function(k){this.setState({currenType:k.value,fansData:[],hasMore:true,offset:0});}});f.exports=j;},null);
__d('PagesManagerSideNav.react',['cx','Image.react','PageTransitions','React','URI','XUIScrubber.react'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('XUIScrubber.react').Item,j=c('XUIScrubber.react').SubItem,k=c('React').PropTypes,l=c('React').createClass({displayName:'PagesManagerSideNav',propTypes:{config:k.object.isRequired,section:k.string.isRequired,subsection:k.string},render:function(){var m=this.props.config.groups.map(function(n,o){return this._getScrubberForGroup(n,o);}.bind(this));return (c('React').createElement('div',null,m));},_getScrubberForGroup:function(m,n){var o=m.map(function(p){return this._getScrubberItemForSection(p);}.bind(this));return (c('React').createElement(c('XUIScrubber.react'),{className:"_2thr",key:n,selected:this.props.section},o));},_getScrubberItemForSection:function(m){var n=this.props.config.sections[m],o=Object.keys(n.subsections).map(function(p){return this._getScrubberSubItemForSubsection(m,p);}.bind(this));return (c('React').createElement(i,{bubbleType:n.bubbleType,count:n.count,key:m,onSelect:this._onSelect.bind(this,m),selected:this.props.section===m?this.props.subsection:null},c('React').createElement(c('Image.react'),{src:n.icon}),n.label,o));},_getScrubberSubItemForSubsection:function(m,n){var o=this.props.config.sections[m],p=o.subsections[n];return (c('React').createElement(j,{count:p.count,key:n,onSelect:this._onSelect.bind(this,m,n)},p.label));},_onSelect:function(m,n){var o=new (c('URI'))(this.props.config.baseURI).addQueryData({section:m,subsection:n}).toString();c('PageTransitions').go(o,true);}});f.exports=l;},null);
__d('PagesNotificationsConstants',['PagesManagerNotificationsConstants','keyMirror'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=Object.assign(c('PagesManagerNotificationsConstants'),{Actions:c('keyMirror')({INITIAL_LOAD:null,LOAD_MORE:null,MARK_READ:null,MARK_SEEN:null,MARK_UNREAD:null,NOTIFICATIONS_SELECTED:null,NOTIFICATIONS_DESELECTED:null}),Events:c('keyMirror')({CHANGE:null,UPDATE_UNREAD_COUNT:null}),Sources:c('keyMirror')({SERVER:null,VIEW_ACTION:null})});f.exports=h;},null);
__d('PagesNotification',['invariant','BackgroundImage.react','ImmutableMap','MercuryTimestamp','NotificationTokens','PagesNotificationsConstants','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();i.create=function(j){'use strict';if(j.constructor.name&&j.constructor.name===i.name)return j;return new i(j);};function i(j){'use strict';this.$PagesNotification1=c('ImmutableMap').create(j);}i.prototype.$PagesNotification2=function(j){'use strict';return c('ImmutableMap').get(this.$PagesNotification1,j);};i.prototype.getAlertID=function(){'use strict';return c('NotificationTokens').untokenizeIDs([this.$PagesNotification2('alert_id')])[0];};i.prototype.$PagesNotification3=function(){'use strict';if(this.$PagesNotification1.attached_story){return this.$PagesNotification1.attached_story.attachments;}else if(this.$PagesNotification1.attachments)return this.$PagesNotification1.attachments;return [];};i.prototype.getCreatedDate=function(){'use strict';return new Date(this.$PagesNotification4());};i.prototype.getDescription=function(){'use strict';return null;};i.prototype.getFeaturedContent=function(){'use strict';var j=this.$PagesNotification3();if(!j.length)return null;var k=j[0];if(k.media&&k.media.image)return (c('React').createElement(c('BackgroundImage.react'),{backgroundSize:'cover',height:48,src:k.media.image.uri,width:66}));return null;};i.prototype.getFilter=function(){'use strict';var j=c('PagesNotificationsConstants').TypesByFilter,k=Object.keys(j),l=this.getType();for(var m=0;m<k.length;m++){var n=k[m];if(j[n].indexOf(l)>=0)return n;}return c('PagesNotificationsConstants').Filters.OTHER;};i.prototype.getHumanReadableTimestamp=function(j,k){'use strict';var l=k||c('MercuryTimestamp').getTimeBucket(this.$PagesNotification4()),m=c('MercuryTimestamp').getFormattedTimestampByBucket(this.$PagesNotification5(),l);if(j){m=m[j];!m?h(0):undefined;}return m;};i.prototype.getIconURI=function(){'use strict';return this.$PagesNotification2('icon').uri;};i.prototype.getID=function(){'use strict';return this.$PagesNotification2('id');};i.prototype.getPreviewData=function(){'use strict';return this.$PagesNotification2('preview_data');};i.prototype.hasPreviewData=function(){'use strict';return this.getPreviewData()!==null;};i.prototype.$PagesNotification5=function(){'use strict';return this.$PagesNotification2('creation_time');};i.prototype.$PagesNotification4=function(){'use strict';return this.$PagesNotification5()*1000;};i.prototype.getTitle=function(){'use strict';return this.$PagesNotification2('title').text;};i.prototype.getTotalActionsString=function(){'use strict';return null;};i.prototype.getType=function(){'use strict';return this.$PagesNotification2('notif_type');};i.prototype.getURL=function(){'use strict';return this.$PagesNotification2('url');};i.prototype.isSelected=function(){'use strict';return this.$PagesNotification2('selected')||false;};i.prototype.isUnread=function(){'use strict';return this.$PagesNotification2('seen_state')!=="SEEN_AND_READ";};i.prototype.isUnseen=function(){'use strict';return this.$PagesNotification2('seen_state')==="UNSEEN_AND_UNREAD";};i.prototype.setSeenAndRead=function(j,k){'use strict';if(k==null)k=!this.isUnread();if(j==null)j=!this.isUnseen();var l='UNSEEN_AND_UNREAD';if(k){l='SEEN_AND_READ';}else if(j)l='SEEN_BUT_UNREAD';return this.__setSeenState(l);};i.prototype.__setSeenState=function(j){'use strict';var k=this.$PagesNotification2('seen_state');if(k!==j)return c('ImmutableMap').set(this.$PagesNotification1,{seen_state:j});return this.$PagesNotification1;};i.prototype.setSelected=function(j){'use strict';return c('ImmutableMap').set(this.$PagesNotification1,{selected:j});};f.exports=i;},null);
__d('PagesNotificationsDispatcher',['invariant','ImmutableMap','PagesNotificationsConstants','ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('ReactDispatcher_DEPRECATED'));j=i&&i.prototype;k.prototype.handleViewAction=function(l){'use strict';this.$PagesNotificationsDispatcher1({source:c('PagesNotificationsConstants').Sources.VIEW_ACTION,action:l});};k.prototype.handleServerAction=function(l){'use strict';this.$PagesNotificationsDispatcher1({source:c('PagesNotificationsConstants').Sources.SERVER,action:l});};k.prototype.$PagesNotificationsDispatcher1=function(l){'use strict';this.dispatch(c('ImmutableMap').create(l));};function k(){'use strict';i.apply(this,arguments);}f.exports=new k();},null);
__d('PagesNotificationsStore',['EventEmitter','Map','PagesNotification','PagesNotificationsConstants','PagesNotificationsDispatcher'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.$PagesNotificationsStore1=new (c('Map'))();this.$PagesNotificationsStore2=null;this.dispatchToken=c('PagesNotificationsDispatcher').register(this.$PagesNotificationsStore3.bind(this));}j.prototype.getAll=function(k){'use strict';var l=this.$PagesNotificationsStore1.get(this.$PagesNotificationsStore2),m=Array.from(l.values());m.sort(function(n,o){return +o.getCreatedDate()- +n.getCreatedDate();});k(m);};j.prototype.getByID=function(k,l){'use strict';l(this.getByIDNow(k));};j.prototype.getByIDNow=function(k){'use strict';return this.$PagesNotificationsStore1.get(this.$PagesNotificationsStore2).get(k);};j.prototype.$PagesNotificationsStore4=function(k){'use strict';this.$PagesNotificationsStore1.get(this.$PagesNotificationsStore2).set(k.id,c('PagesNotification').create(k));};j.prototype.$PagesNotificationsStore5=function(k){'use strict';k.forEach(this.$PagesNotificationsStore4,this);};j.prototype.$PagesNotificationsStore3=function(k){'use strict';var l=k.action,m=k.source,n=m===c('PagesNotificationsConstants').Sources.SERVER;switch(l.type){case c('PagesNotificationsConstants').Actions.INITIAL_LOAD:if(!this.$PagesNotificationsStore1.has(l.pageID))this.$PagesNotificationsStore1.set(l.pageID,new (c('Map'))());this.$PagesNotificationsStore2=l.pageID;case c('PagesNotificationsConstants').Actions.LOAD_MORE:this.$PagesNotificationsStore5(l.notifications);break;case c('PagesNotificationsConstants').Actions.NOTIFICATIONS_SELECTED:this.$PagesNotificationsStore6(l.ids,true);break;case c('PagesNotificationsConstants').Actions.NOTIFICATIONS_DESELECTED:this.$PagesNotificationsStore6(l.ids,false);break;case c('PagesNotificationsConstants').Actions.MARK_READ:if(n){this.$PagesNotificationsStore7(k);}else this.$PagesNotificationsStore8(k,null,true);this.emit(c('PagesNotificationsConstants').Events.UPDATE_UNREAD_COUNT);break;case c('PagesNotificationsConstants').Actions.MARK_UNREAD:if(n){this.$PagesNotificationsStore7(k);}else this.$PagesNotificationsStore8(k,null,false);this.emit(c('PagesNotificationsConstants').Events.UPDATE_UNREAD_COUNT);break;case c('PagesNotificationsConstants').Actions.MARK_SEEN:if(n){this.$PagesNotificationsStore7(k);}else this.$PagesNotificationsStore8(k,true);break;}this.emit(c('PagesNotificationsConstants').Events.CHANGE);};j.prototype.$PagesNotificationsStore6=function(k,l){'use strict';var m=k.map(function(n){return this.getByIDNow(n).setSelected(l);}.bind(this));this.$PagesNotificationsStore5(m);};j.prototype.$PagesNotificationsStore8=function(k,l,m){'use strict';var n=k.action.ids.map(function(o){return this.getByIDNow(o).setSeenAndRead(l,m);}.bind(this));this.$PagesNotificationsStore5(n);};j.prototype.$PagesNotificationsStore7=function(k){'use strict';var l=k.action.notifications.map(function(m){return this.getByIDNow(m.id).__setSeenState(m.seen_state);}.bind(this));this.$PagesNotificationsStore5(l);};f.exports=new j();},null);
__d('PagesManagerLayout.react',['cx','invariant','PagesMessengerActions','Arbiter','CSS','DOM','Layout.react','PagesEventObserver','PagesEventType','PagesInfoRequestsLogger','PagesManagerActivitySection','PagesManagerSideNav.react','PagesMessengerDispatcher','PagesNotificationsConstants','PagesNotificationsStore','PageTransitions','React','ReactDOM','ScrollColumn.react','UIPagelet','URI','XUICard.react','XUISpinner.react','emptyFunction','tidyEvent'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('Layout.react').Column,k=c('React').PropTypes,l={},m=c('React').createClass({displayName:'PagesManagerLayout',propTypes:{config:k.object.isRequired,pageID:k.string.isRequired,section:k.string.isRequired,subsection:k.string,shouldRotateUpsell:k.bool,flowID:k.string,perfParams:k.object},getInitialState:function(){if(this.props.subsection){var n=this.props.config.sections[this.props.section];!n.subsections[this.props.subsection]?i(0):undefined;}return {config:this.props.config,section:this.props.section,subsection:this.props.subsection||this._getDefaultSubsectionForSection(this.props.section)};},render:function(){var n=Object.keys(this.state.config.sections).map(function(p){var q=this._getContentForSection(p);return (c('React').createElement('div',{className:this.state.section!==p?"accessible_elem":'',key:p},c('React').createElement('div',{ref:p}),q));}.bind(this)),o=Object.keys(this.state.config.sideUnits).map(function(p){return (c('React').createElement('div',{className:"_5ss9",key:p,ref:p,id:p}));});return (c('React').createElement(c('Layout.react'),{className:"_3-8x"},c('React').createElement(j,{className:"_5ss9"},c('React').createElement(c('ScrollColumn.react'),null,c('React').createElement(c('PagesManagerSideNav.react'),{config:this.state.config,section:this.state.section,subsection:this.state.subsection}),c('React').createElement('div',{className:"_5ss9",ref:'sideUnit'}),o)),c('React').createElement(j,{className:"_5tdr",ref:'primary'},n)));},componentDidMount:function(){l[this.state.section]=this.state.subsection;this._logSectionView();if(this.state.section===c('PagesManagerActivitySection').MESSAGES)c('PagesEventObserver').logData_DEPRECATED({event_name:c('PagesEventType').MESSAGES_PAGELET_LOAD_START,page_id:this.props.pageID,subsection:this.state.subsection||this._getDefaultSubsectionForSection(this.state.section),flowID:this.props.flowID,loading_event_time:Date.now()});this._loadSectionPagelet({section:this.state.section,subsection:this.state.subsection,data:c('URI').getRequestURI(false).getQueryData(),finallyCallback:function(){Object.keys(this.state.config.sections).forEach(function(n){if(this.state.section===n)return;this._loadSectionPagelet({section:n,data:c('URI').getRequestURI(false).getQueryData()});}.bind(this));}.bind(this)});this._updateSideUnit(this.state.section,c('URI').getRequestURI(false).getQueryData());Object.keys(this.state.config.sideUnits).forEach(function(n){var o=this.state.config.sideUnits[n];if(o.scroll_to_after_load){var p=o.controller.options||{},q=c('ReactDOM').findDOMNode(this.refs[o.scroll_to_after_load]);p.finallyHandler=function(){if(q!==null)q.scrollIntoView(true);};o.controller.options=p;}c('UIPagelet').loadFromEndpoint(o.controller.name,c('ReactDOM').findDOMNode(this.refs[n]),babelHelpers['extends']({},c('URI').getRequestURI(false).getQueryData(),{page_id:this.props.pageID}),babelHelpers['extends']({},o.controller.options,{crossPage:true}));}.bind(this));c('tidyEvent')(c('Arbiter').subscribe('PagesManagerLayout/refreshSection',function(n,o){this._loadSectionPagelet({section:o.section,subsection:this._getSelectedSubsectionForSection(o.section),data:babelHelpers['extends']({},c('URI').getRequestURI(false).getQueryData(),{refresh:true})});}.bind(this)));c('tidyEvent')(c('Arbiter').subscribe('PagesManagerLayout/updateCount',function(n,o){this._updateCount(o.count,o.section,o.subsection);}.bind(this)));c('PagesNotificationsStore').addListener(c('PagesNotificationsConstants').Events.UPDATE_UNREAD_COUNT,function(){c('PagesNotificationsStore').getAll(function(n){var o={};n.forEach(function(p){var q=p.getFilter();o[q]=o[q]||0;if(p.isUnread())o[q]++;});Object.keys(o).forEach(function(p){this._updateCount(o[p],'notifications',p);}.bind(this));}.bind(this));}.bind(this));c('PagesMessengerDispatcher').handleUpdateFromViewAction({actionType:c('PagesMessengerActions').ONVISIBLE_INIT,visible:this.state.section===c('PagesManagerActivitySection').MESSAGES});c('PageTransitions').registerHandler(this._onPageTransition);},componentDidUpdate:function(n,o){l[this.state.section]=this.state.subsection;if(o.section!==this.state.section||o.subsection!==this.state.subsection){this._logSectionView();if(this.state.section===c('PagesManagerActivitySection').MESSAGES)c('PagesMessengerDispatcher').handleUpdateFromViewAction({actionType:c('PagesMessengerActions').ONVISIBLE_RESET});}},componentWillUnmount:function(){c('PageTransitions').removeHandler(this._onPageTransition);},componentWillMount:function(){if(this.state.section===c('PagesManagerActivitySection').MESSAGES)c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_PAGES_MANAGER_LAYOUT_COMPONENT_WILL_MOUNT,this.props.pageID,{flowID:this.props.flowID,loading_event_time:Date.now(),subsection:this.state.subsection||this._getDefaultSubsectionForSection(this.state.section)});},_getContentForSection:function(n){if(n!==this.state.section)return null;var o=this.state.config.sections[n].content;if(!o)return null;return c('React').createElement(o.module,babelHelpers['extends']({},o.props,{section:this.state.section,subsection:this.state.subsection}));},_getDefaultSubsectionForSection:function(n){return Object.keys(this.props.config.sections[n].subsections)[0];},_getSelectedSubsectionForSection:function(n){if(l[n])return l[n];return this._getDefaultSubsectionForSection(n);},_loadSectionPagelet:function(n){var o=n.section,p=n.subsection,q=n.data,r=n.finallyCallback,s=this.state.config.sections[o];if(!s.controller){r=r||c('emptyFunction');return r();}var t=this.props.perfParams;if(t)t=JSON.stringify(t);c('UIPagelet').loadFromEndpoint(s.controller.name,c('ReactDOM').findDOMNode(this.refs[o]),babelHelpers['extends']({},q,{page_id:this.props.pageID,flowID:this.props.flowID,perfParams:t,subsection:p||this._getDefaultSubsectionForSection(o)}),babelHelpers['extends']({},s.controller.options,{crossPage:true,finallyHandler:r}));},_logSectionView:function(){if(this.state.section===c('PagesManagerActivitySection').INFO_REQUESTS)c('PagesInfoRequestsLogger').logTabView();var n=this.state.config.sections[this.state.section].loggingEvent;if(!n)return;c('PagesEventObserver').logData_DEPRECATED({event_name:n,page_id:this.props.pageID,section:this.state.section,subsection:this.state.subsection});},_onPageTransition:function(n){var o=c('URI').getRequestURI(false);if(n.getPath()!==o.getPath()||n.getQueryData().sk!==o.getQueryData().sk)return false;var p=n.getQueryData().section,q=n.getQueryData().subsection;if(!q)q=this._getSelectedSubsectionForSection(p);var r=this.state.config.sections[p];!r?i(0):undefined;var s=r.subsections[q];!(!q||s)?i(0):undefined;if(this.state.section===p){if(r.reloadOnSubsectionChange)return false;this._loadSectionPagelet({section:p,subsection:q,data:n.getQueryData()});}this._updateSideUnit(p,n.getQueryData);this.setState({section:p,subsection:q});c('PageTransitions').transitionComplete();return true;},_updateCount:function(n,o,p){var q=this.state.config,r=q.sections[o],s=r.subsections[p];if(s){s.count=n;}else r.count=n;this.setState({config:q});},_updateSideUnit:function(n,o){var p=this.state.config.sections[n];if(p.sideUnitController){c('DOM').empty(c('ReactDOM').findDOMNode(this.refs.sideUnit));c('ReactDOM').render(c('React').createElement(c('XUICard.react'),{className:"_3-8x _2ph-"},c('React').createElement('div',{className:"_5kcp"},c('React').createElement(c('XUISpinner.react'),{size:'large'}))),c('ReactDOM').findDOMNode(this.refs.sideUnit));c('CSS').show(c('ReactDOM').findDOMNode(this.refs.sideUnit));c('UIPagelet').loadFromEndpoint(p.sideUnitController.name,c('ReactDOM').findDOMNode(this.refs.sideUnit),babelHelpers['extends']({},o,{page_id:this.props.pageID}),p.sideUnitController.options);}else c('CSS').hide(c('ReactDOM').findDOMNode(this.refs.sideUnit));}});f.exports=m;},null);
__d("XPagesNotificationsAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/notifications\/",{cursor:{type:"String"},filter:{type:"Enum",enumType:1}});},null);
__d("XPagesNotificationsStateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/notifications\/state\/",{alert_ids:{type:"StringVector",required:true},mark_read:{type:"Bool",defaultValue:false},mark_seen:{type:"Bool",defaultValue:false}});},null);
__d('PagesNotificationsActions',['invariant','ActorURI','AsyncRequest','CurrentPage','PagesNotificationsConstants','PagesNotificationsDispatcher','PagesNotificationsStore','XPagesNotificationsAsyncController','XPagesNotificationsStateController','emptyFunction'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();i.prototype.selectNotifications=function(j){'use strict';c('PagesNotificationsDispatcher').handleViewAction({type:c('PagesNotificationsConstants').Actions.NOTIFICATIONS_SELECTED,ids:j});};i.prototype.deselectNotifications=function(j){'use strict';c('PagesNotificationsDispatcher').handleViewAction({type:c('PagesNotificationsConstants').Actions.NOTIFICATIONS_DESELECTED,ids:j});};i.prototype.markSeen=function(j,k){'use strict';c('PagesNotificationsDispatcher').handleViewAction({type:c('PagesNotificationsConstants').Actions.MARK_SEEN,ids:j,pageID:k});this.$PagesNotificationsActions1(j,true,null,k,function(l){var m=l.getPayload();if(m.is_invisible_employee_admin)return;c('PagesNotificationsDispatcher').handleServerAction({type:c('PagesNotificationsConstants').Actions.MARK_SEEN,notifications:m.notifications});});};i.prototype.markAllAsSeen=function(j){'use strict';this.$PagesNotificationsActions2(true,null,j);};i.prototype.markRead=function(j,k){'use strict';c('PagesNotificationsDispatcher').handleViewAction({type:c('PagesNotificationsConstants').Actions.MARK_READ,ids:j,pageID:k});this.$PagesNotificationsActions1(j,null,true,k,function(l){var m=l.getPayload();c('PagesNotificationsDispatcher').handleServerAction({type:c('PagesNotificationsConstants').Actions.MARK_READ,notifications:m.notifications});});};i.prototype.markAllAsRead=function(j){'use strict';this.$PagesNotificationsActions2(null,true,j);};i.prototype.markUnread=function(j){'use strict';c('PagesNotificationsDispatcher').handleViewAction({type:c('PagesNotificationsConstants').Actions.MARK_UNREAD,ids:j});this.$PagesNotificationsActions1(j,null,false,null,function(k){var l=k.getPayload();c('PagesNotificationsDispatcher').handleServerAction({type:c('PagesNotificationsConstants').Actions.MARK_UNREAD,notifications:l.notifications});});};i.prototype.loadMore=function(j,k,l){'use strict';var m=c('XPagesNotificationsAsyncController').getURIBuilder().setString('cursor',k).setEnum('filter',j).getURI();this.$PagesNotificationsActions3(m,null,function(n){var o=n.getPayload();c('PagesNotificationsDispatcher').handleServerAction({type:c('PagesNotificationsConstants').Actions.LOAD_MORE,notifications:o.notifications});},l);};i.prototype.$PagesNotificationsActions4=function(j){'use strict';return j.map(function(k){var l=c('PagesNotificationsStore').getByIDNow(k);return l.getAlertID();});};i.prototype.$PagesNotificationsActions3=function(j,k,l,m){'use strict';m=m||c('emptyFunction');new (c('AsyncRequest'))().setURI(c('ActorURI').create(j,k||c('CurrentPage').getID())).setHandler(l).setFinallyHandler(m).send();};i.prototype.$PagesNotificationsActions1=function(j,k,l,m,n){'use strict';!(k!==null||l!==null)?h(0):undefined;if(j.length===0)return;var o=this.$PagesNotificationsActions4(j),p=c('XPagesNotificationsStateController').getURIBuilder().setStringVector('alert_ids',o).setBool('mark_read',l).setBool('mark_seen',k).getURI();this.$PagesNotificationsActions3(p,m,n);};i.prototype.$PagesNotificationsActions2=function(j,k,l){var m=arguments.length<=3||arguments[3]===undefined?c('emptyFunction'):arguments[3];'use strict';!(j!==null||k!==null)?h(0):undefined;var n=null;if(j)n=c('PagesNotificationsConstants').Actions.MARK_SEEN;if(k)n=c('PagesNotificationsConstants').Actions.MARK_READ;if(!j&&!k)n=c('PagesNotificationsConstants').Actions.MARK_UNREAD;c('PagesNotificationsStore').getAll(function(p){c('PagesNotificationsDispatcher').handleViewAction({type:n,ids:p.map(function(q){return q.getID();}),pageID:l});});var o=c('XPagesNotificationsStateController').getURIBuilder().setStringVector('alert_ids',[c('PagesNotificationsConstants').SELECT_ALL_KEY]).setBool('mark_read',k).setBool('mark_seen',j).getURI();this.$PagesNotificationsActions3(o,l,function(p){var q=p.getPayload();c('PagesNotificationsDispatcher').handleServerAction({type:n,notifications:q.notifications});m(p);});};function i(){'use strict';}f.exports=new i();},null);
__d('PagesNotificationsListRow.react',['cx','fbt','xuiglyph','BusinessURI.brands','Image.react','ImageBlock.react','LeftRight.react','Link.react','PagesNotification','PagesSelectableListRow.react','React','Tooltip.react','XUIText.react','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'RedirectImage',render:function(){return (c('React').createElement(c('Tooltip.react'),{className:"_3-99",tooltip:i._("Cliquez sur cette notification pour ouvrir le contenu dans un nouvel onglet.")},c('React').createElement(c('Image.react'),{className:"_1swu",src:j({name:'leave',shade:'dark',size:'small'})})));}}),m=c('React').createClass({displayName:'PagesNotificationsListRow',propTypes:{notification:k.instanceOf(c('PagesNotification')).isRequired,onNotificationClick:k.func},render:function(){var n=this.props.notification,o=c('joinClasses')(this.props.className,"_2v5c"+(!n.hasPreviewData()?' '+"_1d2k":'')),p=n.hasPreviewData()?null:c('React').createElement(l,null);return (c('React').createElement(c('PagesSelectableListRow.react'),babelHelpers['extends']({},this.props,{className:o,notification:null,selected:n.isSelected(),unread:n.isUnread()}),c('React').createElement(c('Link.react'),{href:c('BusinessURI.brands')(n.getURL()),onClick:this._handleNotificationClick,target:n.hasPreviewData()?'_self':'_blank'},c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},c('React').createElement('div',{className:"_jqt"},c('React').createElement('div',{className:"_jqu _xh9"},c('React').createElement(c('XUIText.react'),{className:"_1sww"},n.getTitle()),c('React').createElement('span',{className:"_xha"+(' '+"_xh9")+(n.getTotalActionsString()===null?' '+"hidden_elem":'')},n.getTotalActionsString()),p),c('React').createElement('div',{className:"_jqs"},n.getDescription()),c('React').createElement(c('ImageBlock.react'),{className:"_jqv",spacing:'small'},c('React').createElement(c('Image.react'),{className:"_jqw",src:n.getIconURI()}),c('React').createElement('div',null,n.getHumanReadableTimestamp('relative')))),c('React').createElement('div',{className:"_jr0"},n.getFeaturedContent(),c('React').createElement('div',null))))));},_handleNotificationClick:function(event){if(this.props.onNotificationClick)this.props.onNotificationClick(this.props.notification,event);}});f.exports=m;},null);
__d('PagesNotificationsPreviewDialog.react',['cx','LayerFadeOnHide','PagesManagerNotificationsTestIDs','PagesNotification','React','ReactDOM','UIPagelet','XUIDialog.react','XUIDialogCloseButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUISpinner.react'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'PagesNotificationsPreviewDialog',propTypes:{notification:i.instanceOf(c('PagesNotification')).isRequired},componentDidMount:function(){this._maybeLoadPageletContent();},shouldComponentUpdate:function(k){return this.props.notification.getID()!==k.notification.getID();},componentDidUpdate:function(){this._maybeLoadPageletContent();},render:function(){return (c('React').createElement(c('XUIDialog.react'),babelHelpers['extends']({},this.props,{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},notification:null,width:512}),c('React').createElement(c('XUIDialogTitle.react'),null,this.props.notification.getTitle()),c('React').createElement('div',{className:"_2ph_ _2tt7",'data-testid':c('PagesManagerNotificationsTestIDs').PREVIEW_DIALOG,ref:'previewContent'},this._getDialogContent()),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCloseButton.react'),null))));},_getDialogContent:function(){var k=this.props.notification.getPreviewData(),l=k.pagelet,m=k.data;if(m.isReact)return c('React').createElement(l,m);return (c('React').createElement('div',{className:"_2tt8",'data-testid':c('PagesManagerNotificationsTestIDs').LOADING_SPINNER},c('React').createElement(c('XUISpinner.react'),{size:'large'})));},_maybeLoadPageletContent:function(){var k=this.props.notification.getPreviewData(),l=k.pagelet,m=k.data;if(m.isReact)return;c('UIPagelet').loadFromEndpoint(l,c('ReactDOM').findDOMNode(this.refs.previewContent),babelHelpers['extends']({},m,{is_notification_preview:true}),{crossPage:false});}});f.exports=j;},null);
__d('PagesNotificationsListArea.react',['csx','cx','fbt','CSS','DOM','Image.react','Link.react','MercuryTimestamp','PagesManagerNotificationsTestIDs','PagesNotificationsActions','PagesNotificationsConstants','PagesNotificationsDispatcher','PagesNotificationsListRow.react','PagesNotificationsPreviewDialog.react','PagesNotificationsStore','PagesSelectableList.react','React','ReactDOM','ReactLayeredComponentMixin','SubscriptionsHandler','XUIButton.react','XUICard.react','XUICardSection.react','XUIText.react'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('PagesNotificationsConstants').Filters.ALL;function m(p){return {cursor:p.end_cursor||null,hasMoreNotifications:p.has_next_page!==false};}function n(p){if(p==null||p===l)return j._("Toutes les notifications");return c('PagesNotificationsConstants').FilterLabels[p];}var o=c('React').createClass({displayName:'PagesNotificationsListArea',mixins:[c('ReactLayeredComponentMixin')],propTypes:{page_info:k.object,subsection:k.string},getDefaultProps:function(){return {page_info:{end_cursor:'',has_next_page:true}};},getInitialState:function(){var p=m(this.props.page_info);return Object.assign({dialogShown:false,dialogNotification:null,filter:this.props.subsection||l,forceLoadMore:false,notifications:[]},p);},componentWillMount:function(){this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('PagesNotificationsStore').addListener(c('PagesNotificationsConstants').Events.CHANGE,function(){return c('PagesNotificationsStore').getAll(this._setNotifications);}.bind(this)));},componentDidMount:function(){c('PagesNotificationsDispatcher').handleServerAction({type:c('PagesNotificationsConstants').Actions.INITIAL_LOAD,notifications:this.props.notifications,pageID:this.props.page_id});},componentWillUnmount:function(){this._subscriptions.release();},componentDidUpdate:function(p){var q=this.state.notifications.filter(function(s){return s.isUnseen();});if(q.length){var r=q.map(function(s){return s.getID();});c('PagesNotificationsActions').markSeen(r);}if(p.subsection!==this.props.subsection)this._updateFilter(this.props.subsection);c('DOM').scry(c('ReactDOM').findDOMNode(this.refs.notificationsList),"._1d2k").forEach(function(s){var t="_1d2j";if(c('CSS').hasClass(s,t))return;var u=c('DOM').find(s,"._jqu"),v=u.getBoundingClientRect().width,w=u.firstChild.getBoundingClientRect().width;c('CSS').conditionClass(s,t,w>v);});},renderLayers:function(){if(!this.state.dialogShown||!this.state.dialogNotification.hasPreviewData())return {};return {previewDialog:c('React').createElement(c('PagesNotificationsPreviewDialog.react'),{notification:this.state.dialogNotification,onToggle:function(p){return this.setState({dialogShown:p});}.bind(this),shown:true})};},render:function(){var p=null,q=null,r=this._getNotificationsForSelectedType(),s=this._getSelectedNotifications().length;if(s>0){p=c('React').createElement('div',null,c('React').createElement(c('XUIButton.react'),{label:j._("Marquer comme lue"),onClick:function(){return c('PagesNotificationsActions').markRead(this._getSelectedNotifications().map(function(u){return u.getID();}));}.bind(this)}),c('React').createElement(c('XUIButton.react'),{label:j._("Marquer comme non lue"),onClick:function(){return c('PagesNotificationsActions').markUnread(this._getSelectedNotifications().map(function(u){return u.getID();}));}.bind(this)}));q=c('React').createElement('span',{className:"_4dyq"},j._({"*":"{number of selected notifications} s\u00e9lectionn\u00e9e(s)"},[j.param('number of selected notifications',s,[0,s])]));}else if(r.length>0)p=c('React').createElement(c('XUIButton.react'),{label:j._("Tout marquer comme lu"),onClick:function(){return c('PagesNotificationsActions').markAllAsRead();}});var t=r.length===0?this._renderNullState():this._renderNotificationsWithDateDividers();return (c('React').createElement(c('XUICard.react'),{className:"_1z3_"},c('React').createElement(c('XUICardSection.react'),{className:"_1giw"},n(this.state.filter),q),c('React').createElement(c('XUICardSection.react'),null,c('React').createElement(c('PagesSelectableList.react'),{actionBarRightComponent:p,className:"_1t7p",'data-testid':c('PagesManagerNotificationsTestIDs').NOTIF_LIST,forceRequestMoreRows:this.state.forceLoadMore,onRequestMoreRows:this._loadMoreNotifications,onSelectionChange:this._handleSelectionChange,ref:'notificationsList'},t))));},_setNotifications:function(p){this.setState({notifications:p});},_getSelectedNotifications:function(){return this._getNotificationsForSelectedType().filter(function(p){return p.isSelected();});},_getNotificationsForSelectedType:function(){if(this.state.filter===null||this.state.filter===l)return this.state.notifications;return this.state.notifications.filter(function(p){return p.getFilter()===this.state.filter;}.bind(this));},_groupNotificationsByDay:function(){var p={};this._getNotificationsForSelectedType().forEach(function(q){var r=c('MercuryTimestamp').getFormatedTimestamp(q.getCreatedDate().getTime()).absolute;if(!p[r])p[r]=[];p[r].push(q);});return p;},_renderNotificationsWithDateDividers:function(){var p=this._groupNotificationsByDay(),q=[];Object.keys(p).forEach(function(r){q.push(c('React').createElement('li',{className:"_4dyr",key:r},r));var s=p[r].map(function(t){return (c('React').createElement(c('PagesNotificationsListRow.react'),{key:t.getID(),notification:t,onNotificationClick:this._handleNotificationClick}));}.bind(this));q.push.apply(q,s);}.bind(this));return q;},_renderNullState:function(){return (c('React').createElement('li',{className:"_5swj _2pi1",key:'nullstate'},c('React').createElement('div',null,c('React').createElement(c('Image.react'),{className:"_5we2",src:'/images/pages/pages_manager/notifications_blankstate.png'})),c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{weight:'bold'},j._("Aucune notification."))),this._renderNullStatePromotePageUpsell()));},_renderNullStatePromotePageUpsell:function(){if(!this.props.promotePageUpsell.enabled)return null;return (c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_3-8x",color:'gray',display:'block'},j._("{link to display the Promote Your Page dialog} pour toucher plus de gens.",[j.param('link to display the Promote Your Page dialog',c('React').createElement(c('Link.react'),{href:this.props.promotePageUpsell.uri,rel:'dialog'},'Promote your Page'))]))));},_updateFilter:function(p){this.setState({cursor:'',filter:p,forceLoadMore:true,hasMoreNotifications:true});},_handleSelectionChange:function(p){var q=p.rowsAdded,r=p.rowsRemoved;if(q.length>0)c('PagesNotificationsActions').selectNotifications(q);if(r.length>0)c('PagesNotificationsActions').deselectNotifications(r);},_handleNotificationClick:function(p,event){if(p.isUnread())c('PagesNotificationsActions').markRead([p.getID()]);if(p.hasPreviewData()){event.preventDefault();this.setState({dialogShown:true,dialogNotification:p});}},_loadMoreNotifications:function(p){c('PagesNotificationsActions').loadMore(this.state.filter,this.state.cursor,function(q){if(q.getError()){p(false);return this.setState({forceLoadMore:false,hasMoreNotifications:false});}var r=q.getPayload();if(r&&r.page_info){var s=m(r.page_info);s.forceLoadMore=false;p(s.hasMoreNotifications);if(!s.hasMoreNotifications)c('PagesNotificationsActions').markAllAsSeen();return this.setState(s);}p(false);}.bind(this));}});f.exports=o;},null);